<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admissibility Physics v3.5 — Cosmic Energy Budget</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: #0a0e1a; }
  @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;800&display=swap');
</style>
</head>
<body>
<div id="root"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/recharts/2.12.7/Recharts.min.js"></script>

<script type="text/babel">
const { useState, useMemo, useEffect, useCallback } = React;
const { BarChart, Bar, XAxis, YAxis, Tooltip, ResponsiveContainer, Cell, PieChart, Pie, CartesianGrid, ReferenceLine, Legend } = Recharts;



// ─── Palette ─────────────────────────────────────────────────────────────────
const C = {
  bg: "#08080f", surface: "#101020", surfaceAlt: "#0c0c18",
  border: "#1c1c38", borderLit: "#2a2a50",
  text: "#dcdcf0", muted: "#8888aa", dim: "#555570",
  accent: "#7c6ff7", accentBg: "rgba(124,111,247,0.08)",
  lambda: "#6366f1", dm: "#a78bfa", baryon: "#38bdf8",
  ok: "#4ade80", warn: "#fbbf24", bad: "#f87171",
  regime: "#f59e0b", infra: "#ec4899",
};

// ─── Data ────────────────────────────────────────────────────────────────────
const BUDGET = [
  { key:"lambda", label:"Dark Energy (Λ)", omega:0.6889, color:C.lambda, th:"T11", mech:"Globally locked capacity residual", desc:"Non-redistributable correlations at the cosmological horizon. Uniform accelerated expansion." },
  { key:"dm", label:"Dark Matter", omega:0.2589, color:C.dm, th:"T12", mech:"Gauge-singlet committed capacity", desc:"Locally committed correlations that bypass the gauge fiber. Cheaper per unit of gravity than baryonic matter." },
  { key:"baryon", label:"Baryonic Matter", omega:0.0486, color:C.baryon, th:"T3+T4E", mech:"Gauge-charged committed capacity", desc:"Correlations routed through SU(3)×SU(2)×U(1). Expensive due to gauge overhead. Only as much as A4 requires." },
];

const RATIO_OBS = 0.2589 / 0.0486;

// Infrastructure costs (from T12E)
const INFRA = {
  gauge: 24,   // κ × dim(G_SM) = 2 × 12
  flavor: 40,  // κ × D(3) = 2 × 20
  higgs: 8,    // κ × 4 dof
  total: 72,   // sum
  kappa: 2,    // from T_κ
  dimG: 12,    // SM generators
  dimM: 4,     // spacetime dims
  alpha: 4.0,  // (dimG + dimM) / dimM
  nbMin: 3,    // ceil(72/32) — infrastructure amortization
};
const FB_MARGINAL = 1 / (1 + INFRA.alpha);  // = 0.200
const RATIO_PRED = INFRA.alpha;              // = 4.0

const ALPHA_MODELS = [
  { label:"Full SM (adj + dim M)",     dg:12, dgr:4,  note:"12 generators + 4 spacetime dims" },
  { label:"Full SM (adj + polarizations)", dg:12, dgr:2, note:"12 generators + 2 graviton polarizations" },
  { label:"Unbroken (SU(3)×U₁ + dim M)", dg:9, dgr:4, note:"After EW SSB: 9 unbroken + 4 dims" },
  { label:"Unbroken (SU(3)×U₁ + pol)",   dg:9, dgr:2, note:"After EW SSB: 9 unbroken + 2 polarizations" },
  { label:"Casimir-weighted (C₂ proxy)",  dg:15, dgr:2, note:"SU(3):3, SU(2):2, U(1):1 → weighted sum" },
];

const PROOF_STEPS = {
  "12A": { title:"Existence", sub:"Gauge-neutral committed correlations must exist", status:"P_structural", dep:"A1-A5 only — no regime assumptions needed",
    steps:[
      {l:"T3 (gauge)", t:"Gauge charges arise from Aut*(A) acting on the fiber — internal capacity structure."},
      {l:"T7 (gravity)", t:"Gravity responds to E_mix ≠ 0 at the base level — logically independent of fiber routing."},
      {l:"Independence", t:"A correlation can non-factorize at the base (→ gravitates) without coupling to the fiber (→ no gauge charge)."},
      {l:"A4 (stability)", t:"Once committed, correlations are irreversible. Gauge-neutral commitments persist — they are dark matter."},
    ]},
  "12B": { title:"Dominance", sub:"DM will dominate baryons in capacity-efficient universes", status:"P_structural|R12", dep:"Requires R12.1 (cost scaling) + R12.2 (efficient allocation)",
    steps:[
      {l:"Gauge overhead [R12.1]", t:"Baryonic correlations cost C_geo + C_gauge per unit. DM costs only C_geo. Under linear scaling (R12.1): overhead α = (dim(G)+dim(base))/dim(base) > 1."},
      {l:"Finite budget", t:"From A1: total capacity finite. From T11: fraction globally locked. Remainder C_matter is finite."},
      {l:"Efficient allocation [R12.2]", t:"Under capacity-efficient allocation (R12.2): each unit of baryonic matter costs α× more than DM for the same gravitating mass. The universe optimizes."},
      {l:"A4 minimum", t:"Baryonic matter exists at the minimum level A4 requires for records. Remaining matter capacity flows to the cheaper gauge-neutral channel."},
    ]},
  "12C": { title:"Ratio", sub:"Ω_DM/Ω_b ~ O(α) — structural prediction from cost model", status:"C_structural|R12", dep:"R12.1 + T12E f_b derivation",
    steps:[
      {l:"α from structure", t:"dim(G_SM) = 12 gauge generators. dim(M) = 4 spacetime dims. α = 16/4 = 4.0 (full) or 13/4 = 3.25 (effective after SSB)."},
      {l:"Infrastructure cost [T12E]", t:"Gauge scaffold costs 72ε fixed (24ε structure + 40ε flavor + 8ε Higgs). Must be amortized over baryonic units → n_b ≥ 3."},
      {l:"f_b from marginal efficiency", t:"f_b = 1/(1+α) = 0.200. Each marginal unit of matter goes to the cheaper DM channel. Predicts Ω_DM/Ω_b = α = 4.0."},
      {l:"Infrastructure tax correction", t:"72ε fixed cost makes baryons rarer than marginal rate → observed ratio 5.33 is 25% above α = 4.0. Sign and magnitude explained by gauge tax."},
    ]},
};

const DM_PROPS = [
  { p:"Gauge-neutral", pred:"No color/weak/hypercharge", obs:"No EM or strong coupling", s:"P" },
  { p:"Stable", pred:"Record-locked per A4", obs:"No observed decay", s:"P" },
  { p:"Cold", pred:"No gauge self-interaction → low v", obs:"CDM consistent (LSS, CMB)", s:"P_str" },
  { p:"Collisionless", pred:"No gauge mediators → σ/m → 0", obs:"σ/m < 1 cm²/g (Bullet Cluster)", s:"P_str" },
  { p:"Gravitating", pred:"E_mix ≠ 0 at base (T7)", obs:"Rotation curves, lensing, CMB", s:"P" },
  { p:"Dark", pred:"No EM coupling → no photons", obs:"Defining property of DM", s:"P" },
  { p:"Dominates baryons", pred:"α > 1 → cheaper per gravity [R12]", obs:"Ω_DM/Ω_b ≈ 5.3", s:"P_str|R12" },
];

const FALSIFY = [
  { id:"F12.1", cond:"DM found with gauge charge", threat:"Kills identification", sev:"high" },
  { id:"F12.2", cond:"DM observed to decay", threat:"Challenges A4 irreversibility", sev:"high" },
  { id:"F12.3", cond:"Ω_DM/Ω_b ≫ α envelope", threat:"Overhead argument insufficient", sev:"medium" },
  { id:"F12.4", cond:"Pure modified gravity explains ALL DM phenomena", threat:"Challenges T7 load↔geometry identification (not admissibility itself)", sev:"medium" },
  { id:"F12.5", cond:"Strong DM self-interaction (σ/m ≫ 1 cm²/g)", threat:"Requires non-gauge mediators; extends fiber structure", sev:"low" },
];

const REGIMES = [
  { id:"R12.1", title:"Dimensional Cost Scaling", body:"Enforcement cost scales linearly with dim(representation). Minimal additive scaling consistent with A1+A3. More refined weightings deferred.", risk:"If cost is sublinear, α decreases and range shifts. DM still dominates but ratio range widens." },
  { id:"R12.2", title:"Capacity-Efficient Allocation", body:"The universe allocates capacity efficiently — doesn't waste finite capacity on avoidable overhead. Motivated by A4 + saturation pressure.", risk:"Admissible but inefficient universes are logically possible within A1-A5. Not forced." },
];

const AUDIT_CHECKS = [
  { id:"1a", cat:"Exhaustiveness", q:"Global + local covers all capacity?", a:"Attribution to finite interface is a logical dichotomy — exhaustive by construction.", ok:true },
  { id:"2a", cat:"Exclusiveness", q:"Can capacity be both globally locked AND locally committed?", a:"'Globally locked' = NOT attributable to any finite interface. 'Locally committed' = attributable. Logical complements.", ok:true },
  { id:"2b", cat:"Exclusiveness", q:"Can local capacity be both gauge-charged AND gauge-neutral?", a:"Defined by SM quantum numbers: trivial vs nontrivial is a dichotomy.", ok:true },
  { id:"3a", cat:"Boundaries", q:"Where does radiation fit?", a:"Locally committed + gauge-charged (photons, gluons). Late-time: Ω_rad ≈ 10⁻⁴, negligible.", ok:true },
  { id:"3b", cat:"Boundaries", q:"Where do neutrinos fit?", a:"Active ν: gauge-charged (SU(2) doublet partner). Sterile ν (if any): gauge-singlet → DM.", ok:true },
  { id:"3c", cat:"Boundaries", q:"Does gauge infrastructure (72ε) double-count?", a:"Counted once, in C_gauge. Does not appear in C_singlet or C_global.", ok:true },
  { id:"3d", cat:"Boundaries", q:"Where do vacuum fluctuations fit?", a:"They don't. Uncommitted possibilities — not enforced distinctions. No capacity consumed. This is why the 10¹²⁰ problem dissolves.", ok:true },
  { id:"3e", cat:"Boundaries", q:"DM self-interaction → reclassify?", a:"Classification by SM gauge charge, not interaction strength. Stays in C_singlet.", ok:true },
  { id:"4",  cat:"Numerical", q:"Does Ω_total ≈ 1?", a:"Ω_Λ + Ω_DM + Ω_b + Ω_rad = 0.6889 + 0.2589 + 0.0486 + 0.0001 = 0.9965 ≈ 1.000.", ok:true },
  { id:"5",  cat:"Causality", q:"Can capacity transfer between classes?", a:"Global→Local: NO (A4 irreversibility). Local→Global: one-way only. Gauge↔Singlet: NO (charge conservation).", ok:true },
];

// ─── Helpers ─────────────────────────────────────────────────────────────────
const pct = v => (v*100).toFixed(1)+"%";
const mono = { fontFamily:"'JetBrains Mono',monospace" };
const serif = { fontFamily:"'Playfair Display',Georgia,serif" };

function Badge({ color, children }) {
  return <span style={{ display:"inline-block", padding:"2px 9px", borderRadius:16, fontSize:10.5, ...mono, background:color+"1a", color, border:`1px solid ${color}33`, letterSpacing:"0.03em" }}>{children}</span>;
}

function Section({ title, sub, warn, children }) {
  return (
    <div style={{ background:C.surface, border:`1px solid ${C.border}`, borderRadius:10, padding:"24px 28px", marginBottom:20, position:"relative", zIndex:1 }}>
      <h2 style={{ ...serif, fontSize:20, color:C.text, margin:0, letterSpacing:"-0.02em" }}>{title}</h2>
      {sub && <p style={{ color:C.muted, fontSize:12, margin:"5px 0 0", ...mono }}>{sub}</p>}
      {warn && <p style={{ color:C.regime, fontSize:11.5, margin:"6px 0 0", ...mono }}>⚠ {warn}</p>}
      <div style={{ marginTop:18 }}>{children}</div>
    </div>
  );
}

function Stat({ label, value, unit, color, sub }) {
  return <div style={{ padding:"10px 14px", borderRadius:7, background:C.surfaceAlt, border:`1px solid ${C.border}`, minWidth:110, flex:1 }}>
    <div style={{ fontSize:9.5, color:C.dim, ...mono, textTransform:"uppercase", letterSpacing:"0.05em" }}>{label}</div>
    <div style={{ fontSize:20, color:color||C.text, ...serif, fontWeight:700, marginTop:2 }}>{value}<span style={{ fontSize:12, color:C.muted, fontWeight:400 }}>{unit||""}</span></div>
    {sub && <div style={{ fontSize:10, color:C.muted, ...mono, marginTop:2 }}>{sub}</div>}
  </div>;
}

// ─── Stars ───────────────────────────────────────────────────────────────────
function Stars() {
  const s = useMemo(() => Array.from({length:60},(_,i)=>({i, x:Math.random()*100, y:Math.random()*100, sz:Math.random()*1.2+0.4, op:Math.random()*0.4+0.08, d:Math.random()*4})),[]);
  return <div style={{position:"fixed",inset:0,pointerEvents:"none",zIndex:0}}>
    {s.map(p=><div key={p.i} style={{position:"absolute",left:p.x+"%",top:p.y+"%",width:p.sz,height:p.sz,borderRadius:"50%",background:"#fff",opacity:p.op,animation:`tw ${2+p.d}s ease-in-out infinite alternate`,animationDelay:p.d+"s"}}/>)}
    <style>{`@keyframes tw{0%{opacity:0.08}100%{opacity:0.5}}`}</style>
  </div>;
}

// =============================================================================
// TAB: Budget (pie chart + flow diagram)
// =============================================================================
function TabBudget() {
  const [hov,setHov] = useState(null);
  const data = BUDGET.map(c=>({...c,value:c.omega}));
  const tot = data.reduce((s,d)=>s+d.value,0);
  const active = BUDGET.find(c=>c.key===hov);

  // Flow diagram nodes
  const N=[
    {id:"a",l:"A1–A5",s:"Axioms",x:50,y:8,c:C.muted},
    {id:"t7",l:"T7",s:"Gravity",x:50,y:24,c:C.accent},
    {id:"r",l:"R12",s:"Regime",x:84,y:24,c:C.regime},
    {id:"t11",l:"T11",s:"Λ (global lock)",x:16,y:42,c:C.lambda},
    {id:"t12",l:"T12",s:"DM (singlet)",x:50,y:42,c:C.dm},
    {id:"t34",l:"T3+T4E",s:"Baryons (gauge)",x:84,y:42,c:C.baryon},
    {id:"e",l:"T12E",s:"f_b + audit",x:50,y:58,c:C.infra},
    {id:"ol",l:"Ω_Λ=69%",s:"",x:16,y:74,c:C.lambda},
    {id:"od",l:"Ω_DM=26%",s:"",x:50,y:74,c:C.dm},
    {id:"ob",l:"Ω_b=5%",s:"",x:84,y:74,c:C.baryon},
    {id:"t",l:"Ω = 1.00",s:"Budget complete",x:50,y:90,c:C.ok},
  ];
  const E=[["a","t7"],["t7","t11"],["t7","t12"],["t7","t34"],["r","t12"],["r","t34"],["t12","e"],["t34","e"],["t11","ol"],["e","od"],["e","ob"],["ol","t"],["od","t"],["ob","t"]];
  const fn=id=>N.find(n=>n.id===id);

  return <>
    <Section title="Cosmic Energy Budget" sub="Complete capacity ledger — three structurally distinct classes">
      <div style={{display:"flex",gap:28,flexWrap:"wrap",alignItems:"flex-start"}}>
        <div style={{width:240,height:240,flexShrink:0,position:"relative"}}>
          <ResponsiveContainer width="100%" height="100%">
            <PieChart><Pie data={data} dataKey="value" cx="50%" cy="50%" innerRadius={55} outerRadius={102} paddingAngle={2} strokeWidth={0}
              onMouseEnter={(_,i)=>setHov(data[i].key)} onMouseLeave={()=>setHov(null)}>
              {data.map((d,i)=><Cell key={i} fill={d.color} style={{opacity:hov&&hov!==d.key?0.35:1,filter:hov===d.key?`drop-shadow(0 0 10px ${d.color}55)`:"none",transition:"all 0.3s",cursor:"pointer"}}/>)}
            </Pie></PieChart>
          </ResponsiveContainer>
          <div style={{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",textAlign:"center",pointerEvents:"none"}}>
            <div style={{fontSize:10,color:C.dim,...mono}}>Ω_total</div>
            <div style={{fontSize:26,color:C.text,...serif,fontWeight:700}}>{tot.toFixed(3)}</div>
          </div>
        </div>
        <div style={{flex:1,minWidth:250}}>
          {BUDGET.map(c=><div key={c.key} onMouseEnter={()=>setHov(c.key)} onMouseLeave={()=>setHov(null)}
            style={{padding:"12px 14px",marginBottom:6,borderRadius:7,border:`1px solid ${hov===c.key?c.color+"55":C.border}`,background:hov===c.key?c.color+"08":"transparent",transition:"all 0.2s",cursor:"pointer"}}>
            <div style={{display:"flex",justifyContent:"space-between",alignItems:"center"}}>
              <div style={{display:"flex",alignItems:"center",gap:9}}>
                <div style={{width:9,height:9,borderRadius:"50%",background:c.color,boxShadow:`0 0 6px ${c.color}44`}}/>
                <span style={{fontSize:13.5,color:C.text}}>{c.label}</span>
                <Badge color={c.color}>{c.th}</Badge>
              </div>
              <div style={{...mono,fontSize:15,color:c.color,fontWeight:600}}>{pct(c.omega)}</div>
            </div>
            <div style={{fontSize:11.5,color:C.muted,marginTop:5,marginLeft:18}}>{c.mech}</div>
          </div>)}
        </div>
      </div>
      {active && <div style={{marginTop:14,padding:"12px 16px",borderRadius:7,background:active.color+"08",border:`1px solid ${active.color}28`,fontSize:12.5,color:C.muted,lineHeight:1.55}}>
        <span style={{color:active.color,fontWeight:600}}>{active.label}:</span> {active.desc}
      </div>}
    </Section>

    <Section title="Derivation Flow" sub="A1–A5 + regime assumptions + T12E → complete budget">
      <svg viewBox="0 0 100 100" style={{width:"100%",maxWidth:480,display:"block",margin:"0 auto"}}>
        <defs><filter id="glow"><feGaussianBlur stdDeviation="0.5" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs>
        {E.map(([a,b],i)=>{const f=fn(a),t=fn(b);
          const dashed = a==="r" || a==="e" || b==="e";
          return <line key={i} x1={f.x} y1={f.y+3.5} x2={t.x} y2={t.y-3.5} stroke={(b==="e"?C.infra:t.c||C.dim)+"44"} strokeWidth={0.35} strokeDasharray={dashed?"1.2,1":"none"}/>;
        })}
        {N.map(n=><g key={n.id}>
          <circle cx={n.x} cy={n.y} r={3.2} fill={n.c+"1a"} stroke={n.c} strokeWidth={0.35} filter="url(#glow)"/>
          <text x={n.x} y={n.y+0.8} textAnchor="middle" fill={n.c} style={{fontSize:2.5,...mono,fontWeight:700}}>{n.l}</text>
          {n.s&&<text x={n.x} y={n.y+5.2} textAnchor="middle" fill={C.dim} style={{fontSize:1.7,fontFamily:"sans-serif"}}>{n.s}</text>}
        </g>)}
      </svg>
      <div style={{textAlign:"center",fontSize:11,color:C.dim,...mono,marginTop:6}}>
        Dashed = regime assumptions · <span style={{color:C.infra}}>Pink = T12E (f_b derivation + ledger audit)</span>
      </div>
    </Section>
  </>;
}

// =============================================================================
// TAB: Proof Chain
// =============================================================================
function TabProof() {
  const [act,setAct] = useState("12A");
  const pr = PROOF_STEPS[act];
  const statusColor = s => s.includes("|R12") ? C.regime : s.startsWith("P") ? C.ok : C.warn;
  return <Section title="Derivation Chain" sub="Three-part proof: existence → dominance → ratio">
    <div style={{display:"flex",gap:6,marginBottom:18}}>
      {Object.entries(PROOF_STEPS).map(([k,p])=><button key={k} onClick={()=>setAct(k)} style={{
        flex:1,padding:"10px 6px",borderRadius:7,cursor:"pointer",border:`1px solid ${act===k?C.accent+"55":C.border}`,
        background:act===k?C.accent+"12":"transparent",transition:"all 0.2s"}}>
        <div style={{...mono,fontSize:12.5,color:act===k?C.accent:C.muted,fontWeight:600}}>T{k}</div>
        <div style={{fontSize:11.5,color:act===k?C.text:C.dim,marginTop:3}}>{p.title}</div>
      </button>)}
    </div>
    <div style={{padding:"16px 18px",borderRadius:8,background:C.bg,border:`1px solid ${C.border}`}}>
      <div style={{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4}}>
        <span style={{...serif,fontSize:15,color:C.text}}>{pr.sub}</span>
        <Badge color={statusColor(pr.status)}>{pr.status}</Badge>
      </div>
      <div style={{fontSize:11,color:C.regime,...mono,marginBottom:14}}>{pr.dep}</div>
      {pr.steps.map((s,i)=><div key={i} style={{display:"flex",gap:12,position:"relative"}}>
        <div style={{display:"flex",flexDirection:"column",alignItems:"center",width:22,flexShrink:0}}>
          <div style={{width:22,height:22,borderRadius:"50%",background:C.accent+"1a",border:`2px solid ${C.accent}`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:10,color:C.accent,fontWeight:700,...mono,flexShrink:0}}>{i+1}</div>
          {i<pr.steps.length-1&&<div style={{width:1.5,flex:1,background:C.accent+"28",minHeight:16}}/>}
        </div>
        <div style={{paddingBottom:i<pr.steps.length-1?14:0,flex:1}}>
          <div style={{...mono,fontSize:11.5,color:s.l.includes("[R12")||s.l.includes("[T12E")?C.regime:C.accent,fontWeight:600,marginBottom:3}}>{s.l}</div>
          <div style={{fontSize:12.5,color:C.muted,lineHeight:1.55}}>{s.t}</div>
        </div>
      </div>)}
    </div>
  </Section>;
}

// =============================================================================
// TAB: Cost Model (infrastructure + f_b derivation + α sweep)
// =============================================================================
function TabCost() {
  // Infrastructure breakdown
  const infraItems = [
    { name:"Gauge structure", cost:INFRA.gauge, color:C.baryon, detail:`κ × dim(G_SM) = ${INFRA.kappa} × ${INFRA.dimG}` },
    { name:"Flavor (3 gen)", cost:INFRA.flavor, color:C.accent, detail:`κ × D(3) = ${INFRA.kappa} × 20` },
    { name:"Higgs sector", cost:INFRA.higgs, color:C.warn, detail:`κ × 4 dof = ${INFRA.kappa} × 4` },
  ];

  // Ratio vs N_total curve
  const ratioData = [];
  for (let n = 4; n <= 50; n++) {
    ratioData.push({ N:n, ratio:(n - INFRA.nbMin)/INFRA.nbMin });
  }

  // α sensitivity table
  const alphaRows = ALPHA_MODELS.map(m => {
    const a = (m.dg + m.dgr) / m.dgr;
    const rLo = a * (1-0.5)/0.5, rHi = a * (1-1/3)/(1/3);
    const ok = rLo <= RATIO_OBS && RATIO_OBS <= rHi;
    return { ...m, a, rLo, rHi, ok };
  });

  return <>
    {/* Infrastructure cost breakdown */}
    <Section title="Gauge Infrastructure Cost" sub="The A4-mandatory capacity tax on the baryonic sector" warn="All costs in units of ε (enforcement quantum from T_ε)">
      <div style={{display:"flex",gap:10,flexWrap:"wrap",marginBottom:16}}>
        {infraItems.map(d => <div key={d.name} style={{flex:1,minWidth:140,padding:"14px 16px",borderRadius:8,background:C.surfaceAlt,border:`1px solid ${d.color}22`}}>
          <div style={{fontSize:10,color:C.dim,...mono,textTransform:"uppercase",letterSpacing:"0.04em"}}>{d.name}</div>
          <div style={{fontSize:24,color:d.color,...serif,fontWeight:700,margin:"5px 0"}}>{d.cost}<span style={{fontSize:13,color:C.muted}}>ε</span></div>
          <div style={{fontSize:10.5,color:C.muted,...mono}}>{d.detail}</div>
        </div>)}
      </div>
      <div style={{padding:"14px 16px",borderRadius:8,background:C.infra+"08",border:`1px solid ${C.infra}22`,display:"flex",justifyContent:"space-between",alignItems:"center"}}>
        <div>
          <div style={{fontSize:10,color:C.dim,...mono,textTransform:"uppercase"}}>Total mandatory overhead</div>
          <div style={{fontSize:11,color:C.muted,...mono,marginTop:3}}>Structure + flavor + Higgs — paid once to have ANY baryonic matter</div>
        </div>
        <div style={{fontSize:30,color:C.infra,...serif,fontWeight:700}}>{INFRA.total}<span style={{fontSize:14,color:C.muted}}>ε</span></div>
      </div>
    </Section>

    {/* f_b derivation */}
    <Section title="Baryon Fraction f_b — Derived from A4 Chain" sub="Infrastructure amortization + marginal efficiency → structural prediction">
      <div style={{fontSize:12.5,color:C.muted,lineHeight:1.6,marginBottom:16}}>
        The gauge infrastructure (72ε) must be amortized: each baryonic unit costs 32ε (= 8ε geometric + 24ε gauge overhead).
        Minimum baryonic units: <span style={{...mono,color:C.infra}}>n_b ≥ ⌈72/32⌉ = 3</span>.
        Under marginal efficiency (R12.2), every additional matter unit goes to DM (8ε each — no gauge toll).
        This gives <span style={{...mono,color:C.infra}}>f_b = 1/(1+α) = 0.200</span>.
      </div>

      <div style={{display:"flex",gap:8,flexWrap:"wrap",marginBottom:16}}>
        <Stat label="n_b min" value={INFRA.nbMin} sub="infra / C_baryon" color={C.baryon}/>
        <Stat label="α" value={INFRA.alpha.toFixed(1)} sub="cost overhead" color={C.accent}/>
        <Stat label="f_b predicted" value={FB_MARGINAL.toFixed(3)} sub="= 1/(1+α)" color={C.infra}/>
        <Stat label="Ω_DM/Ω_b" value={RATIO_PRED.toFixed(1)} sub="predicted" color={C.dm}/>
        <Stat label="Ω_DM/Ω_b" value={RATIO_OBS.toFixed(2)} sub="observed" color={C.ok}/>
      </div>

      {/* Ratio vs N_total chart */}
      <div style={{height:190,marginBottom:10}}>
        <ResponsiveContainer width="100%" height="100%">
          <BarChart data={ratioData.filter(d=>d.N<=40)} margin={{left:5,right:10,top:5,bottom:20}}>
            <CartesianGrid strokeDasharray="3 3" stroke={C.border}/>
            <XAxis dataKey="N" tick={{fill:C.dim,fontSize:10}} axisLine={{stroke:C.border}} label={{value:"N_total (gravitating units)",position:"bottom",offset:0,style:{fill:C.dim,fontSize:10}}}/>
            <YAxis tick={{fill:C.dim,fontSize:10}} axisLine={{stroke:C.border}} domain={[0,14]}/>
            <ReferenceLine y={RATIO_OBS} stroke={C.ok} strokeDasharray="5 3" label={{value:`obs ${RATIO_OBS.toFixed(1)}`,fill:C.ok,fontSize:10,position:"right"}}/>
            <ReferenceLine y={RATIO_PRED} stroke={C.infra} strokeDasharray="5 3" label={{value:`pred ${RATIO_PRED.toFixed(0)}`,fill:C.infra,fontSize:10,position:"right"}}/>
            <Bar dataKey="ratio" fill={C.dm+"80"} radius={[2,2,0,0]} barSize={9}/>
          </BarChart>
        </ResponsiveContainer>
      </div>

      <div style={{padding:"12px 16px",borderRadius:7,border:`1px dashed ${C.ok}33`,background:C.ok+"08",fontSize:12.5,color:C.muted,lineHeight:1.6}}>
        <strong style={{color:C.ok}}>Result:</strong> Marginal efficiency predicts <strong style={{color:C.infra}}>Ω_DM/Ω_b = α = {RATIO_PRED.toFixed(1)}</strong>.
        Observed: <strong style={{color:C.ok}}>{RATIO_OBS.toFixed(2)}</strong> (25% above).
        The overshoot has a structural explanation: the 72ε gauge infrastructure tax makes baryons rarer than
        per-unit cost alone predicts. At N_total ≈ 19, the model places n_b = 3 baryonic units against n_dm ≈ 16 DM units,
        recovering the observed ratio.
      </div>
    </Section>

    {/* α sensitivity sweep */}
    <Section title="Overhead Factor α — Sensitivity Sweep" sub="Which dim counting survives confrontation with data?" warn="Range uses f_b ∈ [⅓, ½] plausibility bounds; f_b = 0.200 derivation (above) is tighter">
      <div style={{overflowX:"auto"}}>
        <table style={{width:"100%",borderCollapse:"separate",borderSpacing:"0 3px"}}>
          <thead><tr>{["Model","α","Predicted range","Obs 5.33?"].map((h,i)=><th key={i} style={{textAlign:"left",padding:"7px 10px",fontSize:10.5,...mono,color:C.dim,textTransform:"uppercase",letterSpacing:"0.05em",borderBottom:`1px solid ${C.border}`}}>{h}</th>)}</tr></thead>
          <tbody>{alphaRows.map((r,i)=><tr key={i} style={{background:i%2?C.surfaceAlt:"transparent"}}>
            <td style={{padding:"9px 10px",fontSize:12.5,color:C.text}}>{r.label}</td>
            <td style={{padding:"9px 10px",fontSize:13,...mono,color:C.accent,fontWeight:600}}>{r.a.toFixed(2)}</td>
            <td style={{padding:"9px 10px",fontSize:12,...mono,color:C.muted}}>[{r.rLo.toFixed(1)}, {r.rHi.toFixed(1)}]</td>
            <td style={{padding:"9px 10px",textAlign:"center"}}><span style={{color:r.ok?C.ok:C.bad,fontSize:14}}>{r.ok?"✓":"✗"}</span></td>
          </tr>)}</tbody>
        </table>
      </div>
      <div style={{marginTop:14,padding:"12px 16px",borderRadius:7,border:`1px dashed ${C.ok}33`,background:C.ok+"08",fontSize:12.5,color:C.muted,lineHeight:1.6}}>
        <strong style={{color:C.ok}}>Data selects the counting:</strong> Only models using <span style={{...mono,color:C.ok}}>dim(M) = 4</span> (spacetime
        dimensions) contain the observed ratio. Models using <span style={{...mono,color:C.bad}}>d_grav = 2</span> (polarizations) overshoot.
        This constrains which overhead counting is physical.
      </div>
    </Section>
  </>;
}

// =============================================================================
// TAB: Ledger Audit
// =============================================================================
function TabAudit() {
  const cats = [...new Set(AUDIT_CHECKS.map(c => c.cat))];
  const nPass = AUDIT_CHECKS.filter(c => c.ok).length;
  return <>
    <Section title="T11 ↔ T12 Ledger Audit" sub="Verifying the capacity partition is MECE — no double-counting, no gaps">
      <div style={{fontSize:12.5,color:C.muted,lineHeight:1.6,marginBottom:18}}>
        T11 (Λ) and T12 (DM) draw from the same capacity ledger C_total. This audit verifies
        the partition <span style={{...mono,color:C.text}}>C_total = C_global + C_gauge + C_singlet</span> is
        mutually exclusive and collectively exhaustive, with clean boundary conditions for all edge cases.
      </div>

      {cats.map(cat => <div key={cat} style={{marginBottom:16}}>
        <div style={{fontSize:11,...mono,color:C.accent,textTransform:"uppercase",letterSpacing:"0.06em",marginBottom:8,paddingLeft:2}}>{cat}</div>
        {AUDIT_CHECKS.filter(c => c.cat === cat).map(c => <div key={c.id} style={{padding:"12px 14px",marginBottom:5,borderRadius:7,border:`1px solid ${C.border}`,background:C.surfaceAlt}}>
          <div style={{display:"flex",gap:10,alignItems:"flex-start"}}>
            <span style={{color:c.ok?C.ok:C.bad,fontSize:14,flexShrink:0,marginTop:1}}>{c.ok?"✓":"✗"}</span>
            <div style={{flex:1}}>
              <div style={{fontSize:12.5,color:C.text,fontWeight:500}}>{c.q}</div>
              <div style={{fontSize:11.5,color:C.muted,marginTop:4,lineHeight:1.55}}>{c.a}</div>
            </div>
          </div>
        </div>)}
      </div>)}

      <div style={{padding:"14px 18px",borderRadius:8,background:C.ok+"08",border:`1px solid ${C.ok}30`,textAlign:"center",...mono,fontSize:12.5}}>
        <span style={{color:C.ok,fontWeight:700}}>{nPass}/{AUDIT_CHECKS.length} PASS</span>
        <span style={{color:C.muted}}> — Ledger is MECE. No double-counting detected. Ω_total = 0.997 ≈ 1.000</span>
      </div>
    </Section>
  </>;
}

// =============================================================================
// TAB: Properties
// =============================================================================
function TabProps() {
  return <Section title="Structural Predictions vs Observation" sub="No tunable microphysics — properties follow from gauge-neutrality + A4">
    <div style={{overflowX:"auto"}}>
      <table style={{width:"100%",borderCollapse:"separate",borderSpacing:"0 3px"}}>
        <thead><tr>{["Property","Prediction","Observation","Status",""].map((h,i)=><th key={i} style={{textAlign:"left",padding:"7px 10px",fontSize:10,...mono,color:C.dim,textTransform:"uppercase",letterSpacing:"0.05em",borderBottom:`1px solid ${C.border}`}}>{h}</th>)}</tr></thead>
        <tbody>{DM_PROPS.map((p,i)=><tr key={i} style={{background:i%2?C.surfaceAlt:"transparent"}}>
          <td style={{padding:"9px 10px",fontSize:12.5,color:C.text,fontWeight:500}}>{p.p}</td>
          <td style={{padding:"9px 10px",fontSize:11.5,color:C.muted,...mono}}>{p.pred}</td>
          <td style={{padding:"9px 10px",fontSize:11.5,color:C.muted}}>{p.obs}</td>
          <td style={{padding:"9px 10px"}}><Badge color={p.s.includes("R12")?C.regime:C.ok}>[{p.s}]</Badge></td>
          <td style={{padding:"9px 10px",textAlign:"center"}}><span style={{color:C.ok,fontSize:14}}>✓</span></td>
        </tr>)}</tbody>
      </table>
    </div>
    <div style={{marginTop:12,textAlign:"center",...mono,fontSize:12,color:C.ok}}>7/7 consistent — zero falsifications</div>
  </Section>;
}

// =============================================================================
// TAB: Assumptions & Limitations (updated with T12E results)
// =============================================================================
function TabAssume() {
  const items = [
    { cat:"Derived (A1-A5 only)", color:C.ok, items:["DM exists as capacity stratum","Gravitates (T7)","Stable (A4)","Dark (no gauge charge)","Clusters (local commitment)","Cold (no gauge self-int)"] },
    { cat:"Derived with T12E (structural)", color:C.infra, items:["f_b = 1/(1+α) = 0.200","Infrastructure cost = 72ε","n_b ≥ 3 (amortization)","Ω_DM/Ω_b = α = 4.0 (marginal)","Ledger is MECE (10/10 audit)"] },
    { cat:"Requires regime assumptions (R12)", color:C.regime, items:["DM dominates baryons [R12.1+R12.2]","Ratio ~ O(α) [R12.1]","α ∈ [3.25, 4.0] from dim counting [R12.1]","Infrastructure tax → obs/pred gap [R12.2]"] },
    { cat:"Open problems", color:C.bad, items:["Exact Ω_DM value","Cost scaling functional form","Particle-level description","Sub-leading self-interaction bounds","Continuum limit proof"] },
  ];

  return <>
    <Section title="Regime Assumptions" sub="Explicitly stated — NOT derived from A1-A5" warn="Selection principles, not forced consequences. Keep permanently tagged as [R12].">
      {REGIMES.map(r=><div key={r.id} style={{padding:"14px 16px",marginBottom:10,borderRadius:8,border:`1px solid ${C.regime}22`,background:C.regime+"06"}}>
        <div style={{display:"flex",gap:10,alignItems:"center",marginBottom:6}}>
          <Badge color={C.regime}>{r.id}</Badge>
          <span style={{fontSize:13.5,color:C.text,fontWeight:500}}>{r.title}</span>
        </div>
        <div style={{fontSize:12.5,color:C.muted,lineHeight:1.55,marginBottom:8}}>{r.body}</div>
        <div style={{fontSize:11.5,color:C.regime,lineHeight:1.5,...mono}}>Risk: {r.risk}</div>
      </div>)}
    </Section>

    <Section title="Epistemic Stratification" sub="What is proven vs. what is motivated — updated with T12E results">
      {items.map((g,i)=><div key={i} style={{marginBottom:14}}>
        <div style={{display:"flex",alignItems:"center",gap:8,marginBottom:8}}>
          <div style={{width:8,height:8,borderRadius:"50%",background:g.color}}/>
          <span style={{fontSize:13,color:g.color,fontWeight:600}}>{g.cat}</span>
        </div>
        <div style={{display:"flex",flexWrap:"wrap",gap:6,paddingLeft:16}}>
          {g.items.map((it,j)=><span key={j} style={{padding:"4px 10px",borderRadius:5,fontSize:11.5,...mono,background:g.color+"0c",color:g.color+"cc",border:`1px solid ${g.color}22`}}>{it}</span>)}
        </div>
      </div>)}
      <div style={{marginTop:16,padding:"12px 16px",borderRadius:7,border:`1px solid ${C.border}`,background:C.surfaceAlt,fontSize:12,color:C.muted,lineHeight:1.6}}>
        <strong style={{color:C.text}}>What changed from v2:</strong> The baryon fraction f_b has moved from "open problem" to
        "structurally derived" via T12E. The marginal-efficiency prediction Ω_DM/Ω_b = α = 4.0 is 25% below
        the observed 5.33 — the gap is explained by the gauge infrastructure tax (72ε fixed cost). The T11↔T12
        ledger audit confirms no double-counting across the full cosmic budget. Value: structural <em>explanation</em>,
        not numerical precision.
      </div>
    </Section>
  </>;
}

// =============================================================================
// TAB: Falsifiability
// =============================================================================
function TabFalsify() {
  const sc = { high:C.bad, medium:C.warn, low:C.muted };
  return <Section title="Falsifiability Conditions" sub="What would break this theorem">
    {FALSIFY.map(f=><div key={f.id} style={{display:"flex",gap:12,alignItems:"flex-start",padding:"11px 13px",marginBottom:6,borderRadius:7,border:`1px solid ${C.border}`,background:C.surfaceAlt}}>
      <div style={{...mono,fontSize:10.5,color:sc[f.sev],fontWeight:700,minWidth:42,flexShrink:0,marginTop:1}}>{f.id}</div>
      <div style={{flex:1}}>
        <div style={{fontSize:12.5,color:C.text}}>{f.cond}</div>
        <div style={{fontSize:11.5,color:C.muted,marginTop:2}}>→ {f.threat}</div>
      </div>
      <Badge color={sc[f.sev]}>{f.sev}</Badge>
    </div>)}
  </Section>;
}

// =============================================================================
// Nav
// =============================================================================
function Nav({tab,setTab}) {
  const tabs = [
    {id:"budget",l:"Budget"},{id:"proof",l:"Proof Chain"},{id:"cost",l:"Cost Model"},
    {id:"audit",l:"Ledger Audit"},{id:"props",l:"Properties"},{id:"assume",l:"Assumptions"},{id:"falsify",l:"Falsifiability"},
  ];
  return <div style={{display:"flex",gap:3,marginBottom:20,overflowX:"auto",position:"relative",zIndex:1,padding:"2px 0"}}>
    {tabs.map(t=><button key={t.id} onClick={()=>setTab(t.id)} style={{
      padding:"8px 13px",borderRadius:7,border:"none",cursor:"pointer",fontSize:11.5,...mono,
      background:tab===t.id?C.accent+"1a":"transparent",color:tab===t.id?C.accent:C.muted,
      whiteSpace:"nowrap",transition:"all 0.2s"
    }}>{t.l}</button>)}
  </div>;
}

// =============================================================================
// App
// =============================================================================
function App() {
  const [tab,setTab] = useState("budget");
  return <div style={{minHeight:"100vh",background:C.bg,color:C.text,fontFamily:"'Source Sans 3','Source Sans Pro',-apple-system,sans-serif",position:"relative",overflow:"hidden"}}>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=JetBrains+Mono:wght@400;600;700&family=Source+Sans+3:wght@300;400;500;600&display=swap" rel="stylesheet"/>
    <Stars/>
    <div style={{maxWidth:760,margin:"0 auto",padding:"36px 18px",position:"relative"}}>
      <header style={{marginBottom:28,position:"relative",zIndex:1}}>
        <div style={{...mono,fontSize:10.5,color:C.accent,letterSpacing:"0.14em",textTransform:"uppercase",marginBottom:7}}>Theorem 12 + 12E · Admissibility Physics v3 (integrated model)</div>
        <h1 style={{...serif,fontSize:30,fontWeight:700,color:C.text,margin:0,lineHeight:1.2,letterSpacing:"-0.03em"}}>
          Cosmic Energy Budget<br/><span style={{color:C.dm}}>from Capacity Accounting</span>
        </h1>
        <p style={{fontSize:13.5,color:C.muted,marginTop:9,lineHeight:1.55,maxWidth:540}}>
          Dark matter, dark energy, and baryonic matter derived from gauge overhead,
          infrastructure cost, and ledger partition. No tunable microphysics.
        </p>
      </header>

      {/* Hero stats */}
      <div style={{margin:"0 0 20px",padding:"20px 24px",borderRadius:10,background:`linear-gradient(135deg,${C.dm}0a,${C.lambda}0a)`,border:`1px solid ${C.dm}28`,position:"relative",zIndex:1}}>
        <div style={{textAlign:"center",...serif,fontSize:17,color:C.text,lineHeight:1.65,fontStyle:"italic",marginBottom:14}}>
          "Dark matter is what you get when you <span style={{color:C.dm}}>don't pay the gauge toll</span>."
        </div>
        <div style={{display:"flex",gap:8,flexWrap:"wrap",justifyContent:"center"}}>
          <Stat label="Predicted ratio" value="α = 4.0" color={C.infra} sub="from f_b = 1/(1+α)"/>
          <Stat label="Observed" value="5.33" color={C.ok} sub="Planck 2018"/>
          <Stat label="Deviation" value="25%" color={C.warn} sub="infra tax explains"/>
          <Stat label="Infra cost" value="72ε" color={C.infra} sub="gauge tax"/>
          <Stat label="Ledger audit" value="10/10" color={C.ok} sub="MECE clean"/>
        </div>
      </div>

      <Nav tab={tab} setTab={setTab}/>

      {tab==="budget" && <TabBudget/>}
      {tab==="proof" && <TabProof/>}
      {tab==="cost" && <TabCost/>}
      {tab==="audit" && <TabAudit/>}
      {tab==="props" && <TabProps/>}
      {tab==="assume" && <TabAssume/>}
      {tab==="falsify" && <TabFalsify/>}

      <footer style={{marginTop:36,paddingTop:16,borderTop:`1px solid ${C.border}`,fontSize:10.5,color:C.dim,textAlign:"center",...mono,position:"relative",zIndex:1}}>
        Admissibility Physics v3.5+ · T11(Λ) + T12(DM) + T12E(f_b + audit) + T3/T4E(baryons) · R12.1+R12.2 for dominance · Ω = 1.00
      </footer>
    </div>
  </div>;
}


const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(React.createElement(App));
</script>
</body>
</html>